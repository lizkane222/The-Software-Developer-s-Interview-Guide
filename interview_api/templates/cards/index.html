{% extends 'base.html' %}

{% block fabhover%}
    {%include 'fabhover.html'%}
{% endblock %}

{% block content %}
<div class="mainWrapper">
    <div class="mainContent dragBox overflowScroll" ondrop="drop(event)" ondragover="allowDrop(event)">        

        <div id="cardForm">
            <div>
                <form action="{% url 'cards_index'%}" method="POST">
                    <h5>Create New Vocabulary Term</h5>
                    {% csrf_token %}
                    <div>
                        {{card_form.as_p}}
                        {{definition_form.as_p}}
                        <input id="AddTermBtn" type="submit" class="btn" value="Add term"/>
                        {% comment %} <input type="submit" class="btn" value="Add definition"/> {% endcomment %}
                    </div>
                </form>
            </div>
        </div> 
        
        <div id="cardIndex" class="draggable collapsible dragBox" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)">
            {% for card in cards %}
            <div class="card sticky-action draggable dragBox" draggable="true" ondragstart="drag(event)" ondrop="drop(event)" ondragover="allowDrop(event)">
                <div class="card-image waves-effect waves-block waves-light">
                    <img class="activator" src={{card.images}}>
                </div>
                <div class="card-content">
                    <span class="card-title activator grey-text text-darken-4">{{card.term}}<i class="material-icons right">more_vert</i></span>
                    <p><a href="#">{{definition.card}}</a></p>
                    <a><i to="{% url 'card_detail' card.id %}"></i></a>
                    <span style="font-size: .5em">{{card.creator}}</span>
                </div>
                <div class="card-action">
                    <a href="#">Category: {{card.category}}</a>
                    <a href="#">Topic: {{card.topic}}</a>
                    <a href="{% url 'card_detail' card.id %}">VIEW +</a>
                </div>
                <div class="card-reveal" >
                    <span class="card-title grey-text text-darken-4">{{card.term}}<i class="material-icons right">close</i></span>
                    {% for code_snippet in code_snippets %}
                        <p>{{code_snippets.}}</p>
                    {% endfor code_snippets %}        
                    
                    {% for definition in definitions %}
                        <p>{{definition.card}}</p>
                    {% endfor %}
                    <p>{{card.creator}}</p>
                </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
    

    
    
    {% comment %} {% endblock %} {% endcomment %}
{% endblock %}

<script>


    {% comment %} $(#AddTermBtn).click(function(){
        let url="http://localhost:8000/cards/" + Math.random();
        setTimeout(function(){
            $("#cardIndex").load(url+" #cardIndex>*","");
        }, 1000);
    }) {% endcomment %}
</script>